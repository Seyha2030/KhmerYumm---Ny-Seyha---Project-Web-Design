(self.modernJsonp=self.modernJsonp||[]).push([["39864"],{551383:function(e,t,n){n.d(t,{Z:()=>a,v:()=>i});let i=()=>"undefined"!=typeof navigator&&"getInstalledRelatedApps"in navigator;async function a(){if(!i())return[];try{return await navigator.getInstalledRelatedApps()}catch(e){return[]}}},695263:function(e,t,n){n.d(t,{bN:()=>g,BY:()=>p,fs:()=>u,EU:()=>s,kt:()=>m,Ly:()=>_,RC:()=>o,jM:()=>d,eK:()=>c});let i=/\s\s+/g,a=e=>e.replace(i," ");var r=n(324307);let l=Object.freeze(new Set(["sensitive_raw_pin_text","is_sensitive_rich_pin_title"])),o=({storyPinDataMetadataPinTitle:e,pinTitle:t})=>e||t,s=(e,t)=>e?e.trim().length>t?(0,r.ZP)(e.trim(),t).trim():e.trim():"",u=({pinTitle:e,gridTitle:t,richSummaryDisplayName:n,richMetadataTitle:i,storyPinDataId:a,storyPinDataMetadataPinTitle:r})=>{let l=r||e,o=s(t,200);return o||n||i||(a&&l?l:null)},d=({closeupUnifiedDescription:e,pinDescription:t})=>a((0,r.ZP)(e||t||"",496)).trim(),c=e=>{let{richSummaryDisplayName:t}=e,n=e.pinJoinVisualAnnotation||[],i=e.pinJoinAnnotationsWithLinks||{},l=e.richMetadataDescription||"",o=e.closeupUnifiedDescription||"",s=n.map(e=>(i||{})[e]||{name:e,url:""}),u="",d=(t||"").toLocaleLowerCase().trim(),c=l.toLocaleLowerCase().trim(),_=o.toLocaleLowerCase().trim();return o&&o.length>3&&_!==d?u=o:l&&l.length>3&&c!==d&&(u=l),u&&(u=a((0,r.ZP)(u,496)).trim()),{description:u,annotationsWithLinks:s}},_=({pinTitle:e,gridTitle:t,richSummaryDisplayName:n,richMetadataTitle:i,storyPinDataId:a,storyPinDataMetadataPinTitle:r,pinJoinVisualAnnotation:o,seoNoindexReason:d,shouldUseSimplifiedTitle:c=!1})=>l.has(d??"")?o?.[0]??" ":c?s(t,200)||o?.[0]||"":u({pinTitle:e,gridTitle:t,richSummaryDisplayName:n,richMetadataTitle:i,storyPinDataId:a,storyPinDataMetadataPinTitle:r})||o?.[0]||e,p=e=>`/pin/${e}/`,m=(e,t)=>{let n=`Pinterest video from ${t}: `.concat(e);return""===t?e:n},g=({pinId:e,seoUrl:t})=>t&&"string"==typeof t?t:p(e)},950883:function(e,t,n){n.d(t,{X:()=>i});let i="favorited"},20310:function(e,t,n){n.d(t,{kf:()=>h,l5:()=>m,of:()=>_,xC:()=>g,yz:()=>p});var i=n(667294),a=n(729434),r=n(993279),l=n(341742),o=n(664897),s=n(603316),u=n(785893);let{Provider:d,getMaybe:c}=(0,a.Z)("PwaContext"),_=({children:e,initialContext:t})=>{let[n,a]=(0,i.useState)(null),o=t||{pwaType:"unknown",twaType:null},c=o.pwaType;(0,l.Z)(()=>{let e=(0,r.FB)(window)||"unknown";a(e),c!==e&&(0,s.nP)("pwa.type_mismatch",{sampleRate:1,tags:{serverPwaType:c,clientPwaType:e,conflict:"unknown"!==c&&"unknown"!==e}})});let _="unknown"===c&&n?n:c,{twaType:p}=o,m=(0,i.useMemo)(()=>({pwaType:_,twaType:p}),[_,p]);return(0,u.jsx)(d,{value:m,children:e})},p=()=>{let e=c();return e?.pwaType??"unknown"},m=()=>{let e=c();return e?.twaType??null},g=()=>"android-twa"===p(),h=()=>{let e=p(),t=(0,o.Z)();return"unknown"===e&&t?null:"windows"===e}},936371:function(e,t,n){n.d(t,{o$:()=>i,ty:()=>a,uH:()=>r});let{Provider:i,MaybeConsumer:a,getMaybe:r}=(0,n(729434).Z)("inviteContext")},710782:function(e,t,n){n.d(t,{M:()=>l,Q:()=>r});var i=n(667294);let a=(0,i.createContext)(null),r=()=>(0,i.useContext)(a),l=a},592900:function(e,t,n){n.d(t,{Z:()=>p});var i=n(111330),a=n(121836),r=n(785873),l=n(695263),o=n(753143),s=n(238589),u=n(941404);let d=new class{constructor(){this.listeners={}}on(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}emit(e,t){this.listeners[e]&&this.listeners[e].forEach(e=>e(t))}},c=new class{constructor(){this.rules={},this.init()}init(){for(let e of[{category:"dweb_max_free_pin_modal",validate:this.validateImageView.bind(this),action:"SHOW_LOGIN_MODAL"},{category:"dweb_save",validate:this.saveRule.bind(this),action:"SHOW_SAVE_MODAL"},{category:"dweb_scroll_banner_dismiss_rule",validate:this.scrollBanerDismissRule.bind(this),action:"BOTTOM_RIGHT_BANNER_DISMISS"},{category:"dweb_scroll_banner_limit_rule",validate:this.scrollBannerLimitRule.bind(this),action:"BOTTOM_RIGHT_BANNER_LIMIT"},{category:"dweb_scroll_banner_show",validate:this.scrollBannerShowRule.bind(this),action:"BOTTOM_RIGHT_BANNER_SHOW"}])this.addRule(e)}initExperiment(e){this.experiment=e}addRule(e){this.rules[e.category]=this.rules[e.category]??[],this.rules[e.category].push(e)}evaluate(e,t){if(!this.rules[e])return null;for(let n of this.rules[e])if(n.validate(t))return n.action;return null}validateImageView(e){let{clickCount:t}=e,{hasSeenLoginModal:n}=e,{hasDismissedLoginModal:i}=e,a=this.experiment?.group==="enabled_relaxation";return a?t+1>=4&&!n&&!i:t+1>=4&&!n}saveRule(e){return"desktop"===e.deviceType}scrollBanerDismissRule(e){return e.scrollTop<64}scrollBannerLimitRule(e){return e.scrollTop<4e3}scrollBannerShowRule(e){let t=this.experiment?.group==="enabled_relaxation";return t?e.isInOpenModalExperience||e.isSafari||e?.state?.scrollSessionCount!==3&&!e.hasDismissedLoginModal:e.isInOpenModalExperience||e.isSafari||e?.state?.scrollSessionCount!==3}};var _=n(669442);let p=new class{constructor(){this.init()}init(){d.on("pinView",this.handlePinView.bind(this)),d.on("pinSave",this.handleSavePin.bind(this)),d.on("showDesktopSignupModal",this.showDesktopSignupModal.bind(this)),d.on("hideDesktopSignupModal",this.hideDesktopSignupModal.bind(this)),d.on("onScrollHybridBanner",this.onScrollHybridBanner.bind(this))}initExperiment(e){this.experiment=e("dweb_upsell_manager_mvp_2"),this.experiment&&c.initExperiment(this.experiment)}emitEvent(e,t){d.emit(e,t)}handlePinView(e){let{history:t,linkTarget:n}=e,d=(0,o.M0)().getItem(i.cu)??0;(0,o.M0)().setItem(i.cu,d+1);let p=(0,s.Nl)().getItem(a.J7);if("SHOW_LOGIN_MODAL"===c.evaluate("dweb_max_free_pin_modal",{clickCount:d,hasSeenLoginModal:p})){let{onUpsellTriggerCallback:i}=e;i(),(0,u.My)("dweb.navigational.upsell.show"),(0,s.Nl)().setItem(a.J7,"true");let o={pinId:e.pinId,seoUrl:e.seoUrl},d=(0,_.Z)((0,l.bN)(o),{mt:"login"});if("fullPageLoad"===n)(0,r.Z)(d,!1);else if("duploClientNav"===n)t.push(d);else{let e=window.open(d,"_blank");e?.focus()}}}handleSavePin(e){if("SHOW_SAVE_MODAL"===c.evaluate("dweb_save",{deviceType:e.deviceType})){let{pinId:t,attributionLabel:n,modalHeadingType:i,showSignupModal:a}=e;a({attributionLabel:"extended_save_out_of_quota"===i?"click_save_button_with_max_unauth_saves":n||"click_save_button_on_closeup",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",mobileOptions:{headingType:i},desktopOptions:{modalType:"signup",modalOptions:{source:"saveButtonExp",container:"save"}},pinId:t})}}showDesktopSignupModal(e){let{displayProps:t,viewType:n,viewParameter:i,trackInteraction:a,trackConversionUpsellForContext:r,logDesktopSignupModalEvent:l,dispatchSignupModalAction:o}=e;o({type:"show",displayProps:t});let{attributionLabel:s,signupFlow:u,reason:d}=t;a({action:"trigger",item:u.type.includes("signup")?"signup-modal":"login-modal"}),r({viewType:n,viewParameter:i,eventType:14688,element:{UPSELL_LOGIN_OR_SIGNUP:13319,ACTION_REQUIRES_LOGIN_OR_SIGNUP:13320,CLICK_LOGIN_OR_SIGNUP:13321}[d]||13322,component:"login"===u.type?14212:14214,upsellReason:s}),l("dispatch_show",{attributionLabel:s,modalType:u.type,reason:d})}hideDesktopSignupModal(e){let{shouldDoSideEffects:t,loginForMore:n,dispatchSignupModalAction:i,logDesktopSignupModalEvent:a}=e,r=e.isEligibilityLoginForMore;t&&n&&r&&n.setVisible(!1),i({type:"dismiss"}),a("dispatch_dismiss",{shouldDoSideEffects:t})}onScrollHybridBanner(e){let{evt:t,isSafari:n,trackConversionUpsell:i,UnauthHybridBannerClassComponent:r,isInOpenModalExperience:l}=e,o=0,u=t&&t.target instanceof Document?t.target:null;if(u&&u.documentElement&&u.documentElement.scrollTop>0?o=u.documentElement.scrollTop:u&&u.body&&u.body.scrollTop>0&&(o=u.body.scrollTop),"BOTTOM_RIGHT_BANNER_DISMISS"===c.evaluate("dweb_scroll_banner_dismiss_rule",{scrollTop:o}))r.state.shouldShowBanner&&!r.state.bannerDismissed&&(i({element:13893,eventType:10243}),r.state.bannerDismissed=!0),r.setShouldShowBanner(!1);else if("BOTTOM_RIGHT_BANNER_LIMIT"===c.evaluate("dweb_scroll_banner_limit_rule",{scrollTop:o})){let e=r.state.shouldShowBanner;r.setState(e=>({shouldShowBanner:"BOTTOM_RIGHT_BANNER_SHOW"===c.evaluate("dweb_scroll_banner_show",{isInOpenModalExperience:l,isSafari:n,state:e}),scrollSessionCount:Math.ceil(o/800)}),()=>{e||!r.state.shouldShowBanner||r.state.bannerViewed||(i({eventType:14688,element:13319,component:14479,upsellReason:"scroll_down"}),r.state.bannerViewed=!0)})}else!(0,s.Nl)().getItem(a.J7)&&!l&&n&&t&&t.preventDefault()}}},867552:function(e,t,n){n.d(t,{D:()=>i,u:()=>a});let{Provider:i,getMaybe:a}=(0,n(729434).Z)("unauthPageWrapperContext")},405463:function(e,t,n){n.d(t,{K:()=>l,T:()=>o});var i=n(667294),a=n(785893);let r=(0,i.createContext)({getPinFeedbackStatus:()=>void 0,setPinFeedbackStatus:()=>{}}),l=()=>(0,i.useContext)(r);function o({children:e}){let[t,n]=(0,i.useState)(Object.freeze({})),l=(0,i.useMemo)(()=>({getPinFeedbackStatus:({pinId:e})=>t[e],setPinFeedbackStatus:({pinId:e,pinFeedbackStatus:i})=>n({...t,[e]:i})}),[t]);return(0,a.jsx)(r,{value:l,children:e})}},493812:function(e,t,n){n.d(t,{ET:()=>o,JH:()=>u,UQ:()=>s,WG:()=>c,yh:()=>_});var i=n(281098),a=n(667294),r=n(729434),l=n(785893);let o={NONE:"NONE",GROUP:"GROUP",SECRET:"SECRET",ARCHIVED:"ARCHIVED"},s={NONE:0,ARCHIVED:1,GROUP:2,SECRET:3},u={COLORS:"COLORS",CREATED_BY_ME:"CREATED_BY_ME",FAVORITED:"FAVORITED",FAVORITED_AND_CREATED:"FAVORITED_AND_CREATED_BY_ME",INTERESTS:"INTERESTS",NONE:""},{Provider:d,getMaybe:c}=(0,r.Z)("ProfileViewContext");function _({children:e}){(0,a.useEffect)(()=>{(0,i.Z)("ProfileViewContext","/app/www/ProfileViewContext.tsx")},[]);let[t,n]=(0,a.useState)(),[r,o]=(0,a.useState)(new Map),[s,c]=(0,a.useState)(),[_,p]=(0,a.useState)(),[m,g]=(0,a.useState)(u.NONE),[h,v]=(0,a.useState)(0),[b,w]=(0,a.useState)(),S=(0,a.useCallback)((e,t)=>{o(new Map(r.set(e,t)))},[r]),f=(0,a.useMemo)(()=>({boardPinDensity:t,boardSortOrder:r,profileBoardView:s,profilePinDensity:_,profileFollowingSelectedIndex:h,selfProfilePinFilter:m,setBoardPinDensity:n,setSelfProfilePinFilter:g,updateBoardSortOrder:S,selfProfileBoardFilter:b,setSelfProfileBoardFilter:w,setProfileBoardView:c,setProfilePinDensity:p,setProfileFollowingSelectedIndex:v}),[t,r,s,_,h,m,b,S]);return(0,l.jsx)(d,{value:f,children:e})}},634405:function(e,t,n){n.d(t,{Z:()=>a});var i=n(581722);let a=()=>(0,i.v9)(({session:{canUseNativeApp:e}})=>e)},101639:function(e,t,n){n.d(t,{$:()=>o,w:()=>s});var i=n(667294),a=n(729434),r=n(785893);let{Provider:l,getMaybe:o}=(0,a.Z)("CloseupPreviewContext");function s({children:e}){let[t,n]=(0,i.useState)(Object.freeze({})),a=(0,i.useMemo)(()=>({setData:(e,t)=>n(n=>({...n,[e]:t})),getData:e=>t[e]}),[t]);return(0,r.jsx)(l,{value:a,children:e})}},883379:function(e,t,n){n.d(t,{Z:()=>l});var i=n(675973),a=n(15667),r=n(647709);let l=({skipExpActivation:e=!1})=>{let{checkExperiment:t}=(0,i.Z)(),n=(0,r.HG)(),{isBot:l,isAuthenticated:o}=(0,a.B)();return!o&&!!n&&n&&!l&&t("unauth_dweb_closeup_redesign",{dangerouslySkipActivation:e}).anyEnabled}},859685:function(e,t,n){n.d(t,{$p:()=>O,_l:()=>R,cO:()=>M,t2:()=>T,w2:()=>P,xM:()=>y});var i=n(281098),a=n(667294),r=n(825332),l=n(512599),o=n(821342),s=n(506662),u=n(675973),d=n(15667),c=n(886981),_=n(378888),p=n(647709),m=n(785893);let g="UnauthDesktopSocialPinLandingPageContext",h="UnauthMobileSocialPinLandingPageContext",v="AthDesktopSocialPinLandingPageContext",b="AuthMobileSocialPinLandingPageContext",w=(0,a.createContext)({hasSeenAuthDesktopLandingToast:!1,hasSeenAuthMobileLandingToast:!1,setHasSeenAuthDesktopLandingToast:()=>{},setHasSeenAuthMobileLandingToast:()=>{},hasDismissedLoginModal:!1,setHasDismissedLoginModal:()=>{},pinImageUrl:"",setPinImageUrl:()=>{}}),S=({children:e})=>{let[t,n]=(0,a.useState)(!1),[i,r]=(0,a.useState)(!1),[l,o]=(0,a.useState)(!1),[s,u]=(0,a.useState)(""),d=(0,a.useMemo)(()=>({hasSeenAuthMobileLandingToast:t,setHasSeenAuthMobileLandingToast:n,hasSeenAuthDesktopLandingToast:i,setHasSeenAuthDesktopLandingToast:r,hasDismissedLoginModal:l,setHasDismissedLoginModal:o,pinImageUrl:s,setPinImageUrl:u}),[t,i,l,o,s,u]);return(0,m.jsx)(w,{value:d,children:e})},f=(0,a.createContext)({key:"",data:null}),E=({children:e})=>{let t=(0,r.TH)(),{isSocialBot:n,isBot:i}=(0,d.B)(),S=(0,o.Z)(),E=S&&S.isAuth,y=(0,p.HG)(),M=(0,a.useMemo)(()=>(0,s.fY)(t)&&(0,_.mB)(t.search).invite_code||"",[t]),O=(0,a.useMemo)(()=>{if(!((0,s.gf)(t)||(0,s.Xn)(t)))return"";let e=(0,_.mB)(t.search);if(e.invite_code)return e.invite_code;let n=e.from;if(!n)return"";let i=(0,_.Jx)(n).split("?")[1]||"";return i&&(0,_.mB)(i).invite_code||""},[t]),R=(0,a.useMemo)(()=>{let e=(0,l.LX)({path:"/pin/:id"},t.pathname);return String(e&&"id"in e.params&&e.params.id)||""},[t.pathname]),[T,P]=(0,a.useState)({key:"",data:null}),[D,C]=(0,a.useState)(!1),A=!E&&y,I=!E&&!y,{checkExperiment:k}=(0,u.Z)(),{hasDismissedLoginModal:x}=(0,a.useContext)(w),{inDwebFullPageModalExp:N,dWebFullPageModalExpGroup:L,inDwebSocialModalUpdateExp:U,dWebSocialModalUpdateExpGroup:H,inDwebUnauthSocialPinLandingExp:B,unauthDwebSocialPinLandingGroup:G,inMwebUnauthSocialPinLandingExp:Z,unauthMwebSocialPinLandingGroup:V,inMwebUnauthRelatedPinsLimitExp:F,unauthMwebRelatedPinsLimitGroup:j,inMwebUnauthSocialPinLandingSecondaryUpsellExp:W,unauthMwebSocialPinLandingSecondaryUpsellGroup:z,inMwebLoginSignupPageExp:J,unauthMwebLoginSignupPageExpGroup:q}=(0,a.useMemo)(()=>{let e=!i&&!n&&A&&M&&(()=>{let e=k("ce_dweb_unauth_splp_blocking",{dangerouslySkipActivation:!0}),t=k("ce_dweb_unauth_splp_blocking_12s",{dangerouslySkipActivation:!0});return e.anyEnabled?e:t})()||{anyEnabled:!1,group:void 0},t=!i&&!n&&A&&M&&k("ce_dweb_unauth_splp_modal_update",{dangerouslySkipActivation:!0})||{anyEnabled:!1,group:void 0},a=!i&&!n&&A&&M&&k("sg_dweb_unauth_social_pin_landing_page")||{anyEnabled:!1,group:void 0},r=!i&&!n&&I&&M&&(k("mweb_q2_mau_push_pc_advanced").anyEnabled&&k("mweb_q2_mau_push_pc_advanced")||k("mweb_q2_mau_push_pc_advanced_row").anyEnabled&&k("mweb_q2_mau_push_pc_advanced_row")||k("mweb_q2_mau_push_pc_emergency").anyEnabled&&k("mweb_q2_mau_push_pc_emergency")||k("mweb_q2_mau_push_pc_emergency_row").anyEnabled&&k("mweb_q2_mau_push_pc_emergency_row")||k("sg_mweb_unauth_social_pin_landing_page"))||{anyEnabled:!1,group:void 0},l=!i&&!n&&I&&M&&(()=>{let e=k("ce_mweb_unauth_related_pins_limit",{dangerouslySkipActivation:!0}),t=k("ce_mweb_unauth_related_pins_limit_no_landing_modal",{dangerouslySkipActivation:!0});return t.group?t:e})()||{anyEnabled:!1,group:void 0},o=r.anyEnabled&&x&&k("sg_mweb_unauth_social_pin_landing_secondary_upsell")||{anyEnabled:!1,group:void 0},s=!i&&!n&&I&&(O&&k("ce_mweb_unauth_splp_signup_banner")||M&&k("ce_mweb_unauth_splp_signup_banner",{dangerouslySkipActivation:!0}))||{anyEnabled:!1,group:void 0};return{inDwebFullPageModalExp:e.anyEnabled,dWebFullPageModalExpGroup:e.group,inDwebSocialModalUpdateExp:t.anyEnabled,dWebSocialModalUpdateExpGroup:t.group,inDwebUnauthSocialPinLandingExp:a.anyEnabled,unauthDwebSocialPinLandingGroup:a.group,inMwebUnauthSocialPinLandingExp:r.anyEnabled,unauthMwebSocialPinLandingGroup:r.group,inMwebUnauthRelatedPinsLimitExp:l.anyEnabled,unauthMwebRelatedPinsLimitGroup:l.group,inMwebUnauthSocialPinLandingSecondaryUpsellExp:o.anyEnabled,unauthMwebSocialPinLandingSecondaryUpsellGroup:o.group,inMwebLoginSignupPageExp:s.anyEnabled,unauthMwebLoginSignupPageExpGroup:s.group}},[i,n,A,I,M,O,k,x]),K="enabled_popover_profile"===G,Q=M||O,$=(0,c.Z)(Q?{name:"InviteCodeMetadataResource",options:{invite_code:Q,field_set_key:K?"default_with_sender_recent_pins":"default"}}:null),Y=$.isLoaded?$.data:null;(0,a.useEffect)(()=>{if(Y){let e=Y.sender??null,t=E&&e.id!==S.id&&e?.should_show_messaging&&S.should_show_messaging;if(A&&e){let t=null,n=null;B||U?(t={inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,expGroup:G,inviterRecentPins:"enabled_popover_profile"===G&&e.recent_pin_images?.["222x"]||[],inviterUsername:"enabled_popover_profile"===G&&e.username||""},U&&(t.socialModalUpdateExpGroup=H)):N?n={inDwebFullPageModalExp:N,isFullPageModalDismissed:D,setIsFullPageModalDismissed:C}:t=[5,9,12,16].includes(Y.invite_channel)?null:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name},P({key:g,data:{inviter:e,popoverData:t,modalData:n}})}else if(I&&e){if(Z||J||j){let t={inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,expGroup:V};W&&(t.secondaryExpGroup=z),j&&(t.limitedRelatedPinsExpGroup=j),J&&(t.loginSignupPageExpGroup=q),P({key:h,data:{upsellData:t}})}}else t&&!y?P({key:b,data:{toastData:{inviter:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,inviterId:e.id},viewer:{viewerId:S.id||""},pin:{pinId:R}}}}):t&&y&&P({key:v,data:{toastData:{inviter:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,inviterId:e.id},viewer:{viewerId:S.id||""},pin:{pinId:R}}}})}else P({key:"",data:null})},[Y,E,y,R,S,N,L,U,H,B,Z,V,I,G,A,F,j,W,z,J,q,D]);let X=(0,a.useMemo)(()=>T,[T]);return(0,m.jsx)(f,{value:X,children:e})},y=({children:e})=>((0,a.useEffect)(()=>{(0,i.Z)("SocialPinLandingPageContext","/app/www/lib/SocialPinLandingPageContext.tsx")},[]),(0,m.jsx)(S,{children:(0,m.jsx)(E,{children:e})})),M=()=>{let e=(0,a.useContext)(f);return e.key===g?e:null},O=()=>{let e=(0,a.useContext)(f);return e.key===h?e:null},R=()=>{let e=(0,a.useContext)(f);return e.key===b?e:null},T=()=>{let e=(0,a.useContext)(f);return e.key===v?e:null},P=()=>(0,a.useContext)(w)},326687:function(e,t,n){n.d(t,{G3:()=>c,Rp:()=>d,kp:()=>u});var i=n(111330),a=n(121836),r=n(410156),l=n(753143),o=n(238589);let s=14*r.F4,u=(e,t)=>{let n=function(){let e=Date.now(),t=(0,l.M0)(),n=Number(t.getItem(i.Li)??null);return{currentTime:e,firstUpsellTime:Number(t.getItem(i.O7)??null),lastUpsellTime:n,showedAppUpsellCurrentSession:!!(0,o.Nl)().getItem(a.JO)}}();return e?function(e,t,n){let{currentTime:a,firstUpsellTime:r,lastUpsellTime:o,showedAppUpsellCurrentSession:u}=e;return(n=n||s,!r||a<r+t)?!u:a-o>n&&((0,l.M0)().removeItem(i.O7),!0)}(n,r.F4):function(e,t){let{currentTime:n,lastUpsellTime:i}=e;return t=t||s,!i||n-i>t}(n,t)},d=({isBot:e,platform:t,userAgent:n})=>{try{return!e&&"android"===t&&7>parseFloat((e=>{let t=(e=e.toLowerCase()).match(/android\s([0-9\.]*)/i);return t?t[1]:void 0})(n))}catch(e){return!1}},c=e=>(e.startsWith("zh")||e.startsWith("ar")?e:e.slice(0,2)).toUpperCase()},102136:function(e,t,n){n.d(t,{MM:()=>f,sw:()=>g,vo:()=>w});var i=n(667294),a=n(111330),r=n(729434),l=n(152615),o=n(753143),s=n(341742),u=n(185347),d=n(323469),c=n(501971),_=n(996970),p=n(831373),m=n(785893);let g={UPDATE:"UPDATE",DELETE:"DELETE",ADD_UNAUTH_COMPLETED_SEARCH:"ADD_UNAUTH_COMPLETED_SEARCH",REMOVE_UNAUTH_COMPLETED_SEARCH:"REMOVE_UNAUTH_COMPLETED_SEARCH",ADD_UNAUTH_CLICKTHROUGH_PIN:"ADD_UNAUTH_CLICKTHROUGH_PIN"},h=e=>({...e,_updateUnauthUserAggregateDefinitions:function(){let{completedSearches:t,closeupPins:n,clickthroughPins:i,downloadedPinsCount:a}=e;e.isQUS=Number(t.length>=1||n.length>=3||i.length>=1||a>=1)},_getDaysSinceLastRevisitation:function(){let{revisitationState:t}=e,{ts:n}=t,i=new Date,a=new Date(n||i);return Math.max(Math.floor(Number(((i.getTime()-a.getTime())/864e5).toFixed(2))),0)},getSnapshot:function(){let t={};return Object.keys(e).forEach(n=>{"function"!=typeof e[n]&&void 0!==e[n]&&(t[n]=e[n])}),t}}),v=({isAuthenticated:e,countryFromIp:t,countryFromHostName:n,regionFromIp:i})=>{let r=(0,l.Z)({countryFromHostName:n||"",countryFromIp:t||"",regionFromIp:i||"",isAuthenticated:!!e}),s={isAuthenticated:Number(e),countryFromIp:t||"",countryFromHostName:n||"",regionFromIp:i||"",visitedUnauthPages:[],closeupPins:[],completedSearches:[],clickthroughPins:[],downloadedPinsCount:0,savedPins:[],isQUS:0,revisitationState:(0,c.K7)(),daysSinceLastRevisitation:0,isStorageAllowed:Number(r)};if(e||!s.isStorageAllowed)return Object.freeze({...h(s),...s});s.visitedUnauthPages=(0,p.ZP)(),s.closeupPins=(0,_.Z)(),s.completedSearches=(0,d.wc)(),s.clickthroughPins=(0,u.R)(),s.downloadedPinsCount=parseInt((0,o.M0)().getItem(a.rN)||0,10),s.savedPins=(0,o.M0)().getItem(a.s1)??[],s.revisitationState=(0,c.iU)();let m=h(s);return s.daysSinceLastRevisitation=m._getDaysSinceLastRevisitation(),m._updateUnauthUserAggregateDefinitions(),Object.freeze({...m,...s})},{Provider:b,get:w}=(0,r.Z)("UnauthUserStateContext");function S(e,t){let{isAuthenticated:n,countryFromIp:i,countryFromHostName:a,isStorageAllowed:r,regionFromIp:l}=e;if(n||!r)return e;switch(t.type){case g.UPDATE:break;case g.ADD_UNAUTH_COMPLETED_SEARCH:(0,d.Lg)(t.payload);break;case g.REMOVE_UNAUTH_COMPLETED_SEARCH:(0,d.pF)(t.payload);break;case g.ADD_UNAUTH_CLICKTHROUGH_PIN:(0,u.e)(t.payload);break;default:return e}return v({isAuthenticated:n,countryFromIp:i,countryFromHostName:a,regionFromIp:l})}function f({children:e,initialState:t}){let[n,a]=(0,i.useReducer)(S,t,v);(0,s.Z)(()=>{a({type:g.UPDATE})});let r=(0,i.useMemo)(()=>({unauthUserState:n,unauthUserStateDispatch:a}),[n,a]);return(0,m.jsx)(b,{value:r,children:e})}},501971:function(e,t,n){n.d(t,{K7:()=>o,Oh:()=>d,Vd:()=>u,WT:()=>l,iU:()=>s});var i=n(111330),a=n(753143),r=n(787995);let l=18e5,o=()=>({count:1,time:0,ts:Date.now()}),s=()=>{try{let{count:e,time:t,ts:n}=(0,a.M0)().getItem(i.SI)??{};if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return{count:e,time:t,ts:n};throw Error("Invalid revisitation data")}catch(e){return o()}},u=e=>{(0,a.M0)().setItem(i.SI,(0,r.Z)(e))};function d(){return s().count>1}},902391:function(e,t,n){n.d(t,{E:()=>l,S:()=>o});var i=n(667294),a=n(111330),r=n(753143);let l=e=>{let t=(0,r.M0)();e?t.setItem(a.rd,1):t.removeItem(a.rd)},o=()=>{let[e,t]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{t(!0)},[]),e&&((0,r.M0)().getItem(a.rd)??!1)}},542963:function(e,t,n){n.d(t,{$:()=>o,Z:()=>u});var i=n(111330),a=n(121836),r=n(753143),l=n(238589);let o=2,s=e=>e.length?{pins:e}:null,u=()=>{let e,t=(0,r.M0)(),n=(e=t.accessAllowed?t.getItem(i.s1):l.ZP.getItem(a.w3),e?.pins??[]),u=e=>t.accessAllowed?t.setItem(i.s1,s(e)):l.ZP.setItem(a.w3,s(e)),d=()=>n.length<o;return{pins:n,save:e=>{d()&&u(n.filter(({id:t})=>t!==e.id).concat([e]))},unsave:e=>u(n.filter(({id:t})=>t!==e)),isSaved:e=>n.some(({id:t})=>t===e),clear:()=>u([]),canSaveMore:d}}},469526:function(e,t,n){n.d(t,{B:()=>u,m:()=>s});var i=n(667294),a=n(825332),r=n(729434),l=n(785893);let{Provider:o,getMaybe:s}=(0,r.Z)("NotifDetailRepinContext");function u({children:e}){let[t,n]=(0,i.useState)(Object.freeze({})),[r,s]=(0,i.useState)(!1),[u,d]=(0,i.useState)(!1),c=(0,a.TH)(),_=(0,i.useMemo)(()=>{let e=/^\/pin\/\d+\/repin\/?$/,i=/^\/news_hub\/\d+\/?$/;return{isSaved:e=>!!t[e],save:e=>{u&&n(t=>({...t,[e]:!0}))},reset:()=>{let t=window?.location.pathname||"";i.test(t)||e.test(t)||(n(Object.freeze({})),s(!1),d(!1))},isInNewsHubQuickSaveExpAndNewsHubPage:()=>{let e=c.pathname||"";return i.test(e)&&r},inNewsHubQuickSaveExp:r,setInNotifDetailPage:d,setInNewsHubQuickSaveExp:s}},[t,r,u,c]);return(0,l.jsx)(o,{value:_,children:e})}},438556:function(e,t,n){n.d(t,{Q:()=>s,n:()=>o});var i=n(667294),a=n(729434),r=n(785893);let{Provider:l,getMaybe:o}=(0,a.Z)("RepinContext");function s({children:e}){let[t,n]=(0,i.useState)(Object.freeze({})),a=(0,i.useMemo)(()=>({getSavedPinId:e=>t[e],isSaved:e=>!!t[e],save:(e,t)=>n(n=>({...n,[e]:t})),unsave:e=>n(t=>({...t,[e]:null}))}),[t]);return(0,r.jsx)(l,{value:a,children:e})}},996970:function(e,t,n){n.d(t,{Z:()=>l});var i=n(918920),a=n(163404),r=n(831373);let l=()=>(e=>{let t=new Date,n=new Date(new Date().setDate(t.getDate()-i.ZB));return e.filter(e=>"closeup"===e.pageType&&new Date(e.ts)>=n)})((0,r.ZP)()).map(e=>({...e,id:(0,a.Z)(e.path)||""}))},202304:function(e,t,n){n.d(t,{Z:()=>r});var i=n(667294),a=n(603316);function r(e){let t=(0,i.useRef)({kind:"NotOver"}),n=(0,i.useCallback)(()=>{"NotOver"===t.current.kind&&(t.current={kind:"OverButNotClicked",mousedOverAt:Date.now()})},[]),r=(0,i.useCallback)(()=>{"OverButNotClicked"===t.current.kind&&((0,a.LY)("entrypointRouter.timeOnLinkUntilMouseOut",Date.now()-t.current.mousedOverAt,{sampleRate:.1,tags:{key:e}}),(0,a.nP)("entrypointRouter.mouseOverResult",{sampleRate:.1,tags:{key:e,outcome:"MouseOut"}})),t.current={kind:"NotOver"}},[e]);return{onClick:(0,i.useCallback)(()=>{"OverButNotClicked"===t.current.kind&&((0,a.LY)("entrypointRouter.timeOnLinkUntilClick",Date.now()-t.current.mousedOverAt,{sampleRate:.1,tags:{key:e}}),(0,a.nP)("entrypointRouter.mouseOverResult",{sampleRate:.1,tags:{key:e,outcome:"Click"}}),t.current={kind:"OverAndHasClicked"})},[e]),onMouseEnter:n,onMouseLeave:r}}},987563:function(e,t,n){(0,n(512395).kr)()},756334:function(e,t,n){function i({children:e,metricName:t}){let n=void 0;return n&&n.serverRenderTimings&&!n.serverRenderTimings[t]&&(n.serverRenderTimings[t]=Date.now()),e}n.d(t,{Z:()=>i}),n(512395),n(987563)}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/39864-0157a34afeb57dd0.mjs.map